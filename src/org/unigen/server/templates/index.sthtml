<!DOCTYPE html>
<html lang="en">
<head>
	<title>Unified Dev Server</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf8"/>
</head>

<script language=javascript>
var socket = new WebSocket("ws://localhost:8080/events")
socket.onopen = function() {
}

socket.onclose = function(event) {
}

socket.onmessage = function(event) {
	var log = document.getElementById("log")
	log.innerHTML = log.innerHTML + event.data + "<br>"
}

socket.onerror = function(error) {
}
</script>

<style>
	body {
		margin: 0
	}
	.header {
		background: orange; 
		padding: 8pt 18pt 8pt; 
		font-family: Helvetica Neue, Helvetica; 
		font-size: 24pt; 
		color: white;
	}
	.section-title {
		font-family: Helvetica Neue, Helvetica; 
		font-size: 18pt;
		padding-bottom: 12pt;
		color: orange;
	}
	.section-item {
		font-family: Helvetica Neue, Helvetica; 
		font-size: 18pt;
		color: gray;
	}
	table.sections {
		width: 100%;
		margin-top: 18pt;
		margin-left: 18pt;
	}
	table.sections td {
		padding-right: 48pt;
	}
	#log {
		font-family: courier;
		font-size: 8pt;
		color: gray;
		height: 100pt;
		overflow: auto;
		background: whitesmoke;
		position: fixed;
		bottom: 0px;
		padding: 8pt;
		width: 100%;
	}

</style>
<body>
<div class='header'>Unified Dev Server</div>
<table class=sections><tr>
<td valign=top>
<div class=section-title>Repositories</div>
~for (Dev_server_configuration.Source source : server.configuration.sources) {~
~	if (!source.is_module) {~
	<div class=section-item>~=source.name~</div>
~	}~
~}~
</td>
<td valign=top>
<div class=section-title>Modules</div>
~for (Dev_server_configuration.Source source : server.configuration.sources) {~
~	if (source.is_module) {~
	<div class=section-item>~=source.name~</div>
~	}~
~}~
</td>
<td valign=top>
<div class=section-title>Connections</div>
~for (Dev_events_websocket connection : server.activity.connections) {~
	<div class=section-item>~=connection.toString()~</div>
~}~
</td>
</tr></table>

<div id=log>
</div>
</body>
</html>